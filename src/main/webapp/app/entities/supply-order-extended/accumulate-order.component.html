<div>
    <h2 id="page-heading">
        <span>Accumulate Orders</span>
    </h2>
    <jhi-alert></jhi-alert>
    <br/>

    <div class="row">
        <div class="col-3">
            <select class="form-control" id="field_FromDate" name="fromDate"
                    [(ngModel)]="fromDate">
                <option [ngValue]="null">Select a From date</option>
                <option [ngValue]="distinctDate"
                        *ngFor="let distinctDate of distinctDates">{{distinctDate | date:'mediumDate'}}</option>
            </select>
        </div>
        <div class="col-3">
            <select class="form-control" id="field_ToDate" name="toDate"
                    [(ngModel)]="toDate">
                <option [ngValue]="null">Select a To date</option>
                <option [ngValue]="distinctDate"
                        *ngFor="let distinctDate of distinctDates">{{distinctDate | date:'mediumDate'}}</option>
            </select>
        </div>
        <div class="col-3">
            <select class="form-control" name="supplyOrderStatus"
                    [(ngModel)]="status"
                    id="field_supplyOrderStatus">
                <option value="ORDER_RECEIVED">ORDER_RECEIVED</option>
                <option value="PROCESSING_ORDER">PROCESSING_ORDER</option>
                <option value="ORDER_DELIVERED_AND_WAITING_FOR_MONEY_COLLECTION">
                    ORDER_DELIVERED_AND_WAITING_FOR_MONEY_COLLECTION
                </option>
                <option value="ORDER_CLOSE">ORDER_CLOSE</option>
            </select>
        </div>
        <div class="col-2">
            <button class="input-group-append btn btn-info" (click)="search(currentSearch)">
                <fa-icon [icon]="'search'">Search</fa-icon>
            </button>
        </div>
    </div>
    <br/>

    <div class="table-responsive" *ngIf="supplyOrders">
        <table class="table table-striped">
            <thead>
            <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse" [callback]="reset.bind(this)">
                <th jhiSortBy="id"><span>ID</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="supplyZoneZoneName"><span>Supply Zone</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="supplyAreaAreaName"><span>Supply Area</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="supplyAreaManagerManagerName"><span>Supply Area Manager</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="supplySalesRepresentativeSalesRepresentativeName">
                    <span>Supply Sales Representative</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="orderNo"><span>Order No</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="dateOfOrder"><span>Date Of Order</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <!--<th jhiSortBy="offer"><span>Offer</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>-->
                <!--<th jhiSortBy="createdBy"><span>Created By</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="createdOn"><span>Created On</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="updatedBy"><span>Updated By</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="updatedOn"><span>Updated On</span> <fa-icon [icon]="'sort'"></fa-icon></th>-->
                <th jhiSortBy="offerAmount"><span>Offer Amount</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="deliveryDate"><span>Delivery Date</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
                <th jhiSortBy="supplyOrderStatus"><span>Supply Order Status</span>
                    <fa-icon [icon]="'sort'"></fa-icon>
                </th>
            </tr>
            </thead>
            <tbody infinite-scroll (scrolled)="loadPage(page + 1)" [infiniteScrollDisabled]="page >= links['last']"
                   [infiniteScrollDistance]="0">
            <tr *ngFor="let supplyOrder of supplyOrders ;trackBy: trackId">
                <td><a [routerLink]="['/supply-order', supplyOrder.id, 'view' ]">{{supplyOrder.id}}</a></td>
                <td>
                    <div *ngIf="supplyOrder.supplyZoneId">
                        <a [routerLink]="['../supply-zone', supplyOrder.supplyZoneId , 'view' ]">{{supplyOrder.supplyZoneZoneName}}</a>
                    </div>
                </td>
                <td>
                    <div *ngIf="supplyOrder.supplyAreaId">
                        <a [routerLink]="['../supply-area', supplyOrder.supplyAreaId , 'view' ]">{{supplyOrder.supplyAreaAreaName}}</a>
                    </div>
                </td>
                <td>
                    <div *ngIf="supplyOrder.supplyAreaManagerId">
                        <a [routerLink]="['../supply-area-manager', supplyOrder.supplyAreaManagerId , 'view' ]">{{supplyOrder.supplyAreaManagerId}}</a>
                    </div>
                </td>
                <td>
                    <div *ngIf="supplyOrder.supplySalesRepresentativeId">
                        <a [routerLink]="['../supply-sales-representative', supplyOrder.supplySalesRepresentativeId , 'view' ]">{{supplyOrder.supplySalesRepresentativeSalesRepresentativeName}}</a>
                    </div>
                </td>
                <td>{{supplyOrder.orderNo}}</td>
                <td>{{supplyOrder.dateOfOrder | date:'mediumDate'}}</td>
                <!--<td>{{supplyOrder.offer}}</td>-->
                <!--  <td>{{supplyOrder.createdBy}}</td>
                  <td>{{supplyOrder.createdOn | date:'medium'}}</td>
                  <td>{{supplyOrder.updatedBy}}</td>
                  <td>{{supplyOrder.updatedOn | date:'medium'}}</td>-->
                <td>{{supplyOrder.offerAmount}}</td>
                <td>{{supplyOrder.deliveryDate | date:'mediumDate'}}</td>
                <td>{{supplyOrder.supplyOrderStatus}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div *ngIf="fromDate && toDate && status == 'ORDER_RECEIVED' && supplyOrders.length > 0">
    <div class="row">
        <div class="col-12">
            <div style="float: right">
                <button type="button" (click)="accumulate()"
                        class="btn btn-primary btn-sm">
                    <span class="d-none d-md-inline">Accumulate</span>
                </button>
            </div>
        </div>
    </div>

    <br/>

    <div class="row">
        <div class="col-12">
            <div class="table-responsive" *ngIf="accumulateOrders">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>Product Name</th>
                        <th>Quantity</th>
                        <th>Amount</th>
                    </tr>
                    </thead>
                    <tbody *ngFor="let accumulateOrder of accumulateOrders">
                    <tr>
                        <td>{{accumulateOrder.productName}}</td>
                        <td>{{accumulateOrder.quantity}}</td>
                        <td>{{accumulateOrder.amount}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <br />

    <div class="row">
        <div class="col-3">
            <div class="form-group">
                <label class="form-control-label" for="field_ReferenceNo">Sales Representative Name</label>
                <input type="text" class="form-control" name="referenceNo" id="field_ReferenceNo"
                       [(ngModel)]="refNo"/>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <button type="button" (click)="proceed()"
                    class="btn btn-success btn-sm" style="float: right">
                <span class="d-none d-md-inline">Proceed</span>
            </button>
        </div>
    </div>
</div>
